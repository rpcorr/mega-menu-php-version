"use strict";let navItems=[];const navItemWidth=[],navItemVisible=[];let moreWidth=0,winWidth=0,output="",megaMenuLinks="",initialColumns="";function handleLinkClick(e){e.preventDefault(),$(this).parents().hasClass("menu-item-has-children")&&toggleTopLevelMenu($(this))}$(document).ready(function(){megaMenuLinks=document.querySelectorAll('nav a[href^="#"]');for(let e=0;e<megaMenuLinks.length;e++)megaMenuLinks[e].addEventListener("click",handleLinkClick),megaMenuLinks[e].addEventListener("keyup",function(e){if(13===e.keyCode){let n=this.nextElementSibling.classList.contains("sub-menu-div");openMenu(n)}});winWidth=$(window).width(),$("#menu-main-menu").on("keydown",function(e){"Escape"==e.key&&closeAllMenus("esc")}),(navItems=$("#menu-main-menu > li")).each(function(){$(this).hasClass("menu-item-has-children")&&$(this).addClass("hover")}),navItems.each(function(){navItemWidth.push($(this).outerWidth()),navItemVisible.push(!0)}),$("#menu-main-menu").append('<li id="menu-more" class="menu-item menu-item-has-children" style="display: none;"><a id="menuMoreLink" href="#" aria-label="More has a sub menu. Click enter to open" aria-expanded="false"></a><ul id="moreSubMenu" class="sub-menu"></ul></li>'),moreWidth=$("#menu-more").outerWidth(),$("#menuMoreLink").click(function(e){e.preventDefault(),$(".menu-item-has-children:not(#menu-more)").removeClass("visible"),$(this).parent(".menu-item-has-children").toggleClass("visible"),$(this).parent(".menu-item-has-children").hasClass("visible")?($(this).children("i").removeClass("angle-down").addClass("angle-up"),$(this).attr("aria-label","Click Enter to close More sub menu"),$(this).attr("aria-expanded",!0)):($(this).children("i").removeClass("angle-up").addClass("angle-down"),$(this).attr("aria-label","More has a sub menu. Click enter to open"),$(this).attr("aria-expanded",!1))}),$("#menuMoreLink").keyup(function(e){13===e.keyCode&&openMenu(!1)}),$("body").click(function(e){$(e.target).closest("li").length||$(".menu-item-has-children").removeClass("visible"),resetArrows(),$(".menu-item-has-children > a").each(function(){$(this).attr("aria-label",`${$(this).text()}has a sub menu. Click enter to open`).attr("aria-expanded","false")})}),$(".menu-item-has-children a").click(function(e){e.stopPropagation()}),$(".menu-item-has-children ul").click(function(e){e.stopPropagation()}),$(".menu-item-has-children li").click(function(e){e.stopPropagation()}),formatNav(),watchForHover()}),$.urlParam=function(e){var n=RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==n?null:decodeURI(n[1])||0};let id;function closeAllMenus(e){if("esc"===e){$("li").removeClass("visible"),resetArrows(),$(".menu-item-has-children > a").each(function(){$(this).attr("aria-label",`${$(this).text()}has a sub menu. Click enter to open`),$(this).attr("aria-expanded",!1),$(this).attr("aria-expanded",!1)});return}void 0===e.attr("id")&&$("li").removeClass("visible"),resetArrows(),$(".menu-item-has-children > a").each(function(){$(this).attr("aria-label",`${$(this).text()}has a sub menu. Click enter to open`),$(this).attr("aria-expanded",!1),$(this).attr("aria-expanded",!1)})}function formatNav(){let e=!0,n=0,t=0,i=0,a=$(".menu-main-menu-container").innerWidth(),s=navItems.length-1;navItems.each(function(){((t=i+navItemWidth[n]+5)<a-moreWidth-5||t<a&&n==s)&&!0==e?(i=t,!0!=navItemVisible[n]&&($("#menu-more").before($("#moreSubMenu").children().first()),navItemVisible[n]=!0,n==s&&$("#menu-more").hide())):(!0==e&&(e=!1,0==n?($("nav").addClass("all-hidden"),$("#menuMoreLink").html('Menu <i class="caret angle-down"></i>')):($("nav").removeClass("all-hidden"),$("#menuMoreLink").html('More <i class="caret angle-down"></i>')),$("#menu-more").show()),$(this).removeClass("hover"),$(this).appendTo($("#moreSubMenu")),navItemVisible[n]=!1),n+=1})}function resetArrows(){$(".caret").removeClass("angle-up").addClass("angle-down")}function onResize(){winWidth!=$(window).width()&&(navItems.each(function(){$(this).hasClass("menu-item-has-children")&&$(this).addClass("hover");let e=$(this).outerWidth();e>0&&(navItemWidth[0]=e)}),moreWidth=$("#menu-more").outerWidth(),$(".menu-item-has-children").removeClass("visible"),resetArrows(),formatNav(),winWidth=$(window).width())}function toggleTopLevelMenu(e){if($(e).parents(".menu-item-has-children").hasClass("visible"))$(e).parent().parent().is("ul#menu-main-menu.menu")?closeAllMenus($(e)):$(e).parent().hasClass("visible")?($(e).parent(".menu-item-has-children").removeClass("visible"),$(e).children("i").removeClass("angle-up").addClass("angle-down"),$(e).attr("aria-label",`${$(e).text()}has a sub menu. Click enter to open`),$(e).attr("aria-expanded",!1),closeSiblingSubMenus(e)):($(e).parents(".menu-item-has-children").addClass("visible"),$(e).children("i").removeClass("angle-down").addClass("angle-up"),$(e).attr("aria-label",`Click Enter to close ${$(e).text()}sub menu`),$(e).attr("aria-expanded",!0));else{$("li.menu-item-has-children").not(e.closest("li")).removeClass("visible"),resetArrows();let n=$("li.menu-item-has-children > a:focus");$("li.menu-item-has-children > a").not(n).each(function(){$(this).attr("aria-label",`${$(this).text()}has a sub menu. Click enter to open`)}),$("li.menu-item-has-children > a").not(n).attr("aria-expanded",!1),$(e).parents(".menu-item-has-children").addClass("visible");let t=document.querySelectorAll(".sub-menu-div");t.forEach(e=>{if(e.closest("li").classList.contains("visible")){let n=e.closest(".sub-menu-div");""===initialColumns&&(initialColumns=n.classList[2]),n.classList.remove("mega-menu-column-2"),n.classList.add(initialColumns);let t=n.offsetWidth,i=Math.round(n.getBoundingClientRect().left),a=document.documentElement.clientWidth;console.log(t,i,a),t+i>a&&n&&n.classList.contains("mega-menu-column-4")&&(n.classList.remove("mega-menu-column-4"),n.classList.add("mega-menu-column-2"))}}),$(e).children("i").removeClass("angle-down").addClass("angle-up"),$(e).attr("aria-label",`Click Enter to close ${$(e).text()}sub menu`),$(e).attr("aria-expanded",!0)}}function watchForHover(){let e=!1,n=0;function t(){!(new Date-n<500)&&(e||($("body").addClass("has-hover"),e=!0))}document.addEventListener("touchstart",function e(){n=new Date},!0),document.addEventListener("touchstart",function n(){e&&($("body").removeClass("has-hover"),e=!1)},!0),document.addEventListener("mousemove",t,!0),t()}function closeSiblingSubMenus(e){$(e).parent().find("li.menu-item-has-children").removeClass("visible"),$(e).parent().find("li.menu-item-has-children > a > i").removeClass("angle-up").addClass("angle-down"),$(e).parent().find("li.menu-item-has-children > a").each(function(){$(this).attr("aria-label",`${$(this).text()}has a sub menu. Click enter to open`).attr("aria-expanded",!1)})}function determineHREFTarget(e){return e.hasOwnProperty("target")?`target="${e.target}"`:"#"!==e.link.charAt(0)&&(-1!==e.link.indexOf("http")||-1!==e.link.indexOf(".pdf"))?'target="_blank"':""}function isCurrentPage(e){if(-1!==window.location.href.indexOf(e)||"index.php"===e)return!0}$(window).resize(function(){clearTimeout(id),id=setTimeout(onResize,10)});var radioButtons=document.querySelectorAll('input[name="option"]');function selectStylesheet(e){let n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href="assets/css/templatesStyles/"+e+".css",document.head.appendChild(n);let t=document.querySelectorAll('link[rel="stylesheet"][href^="assets/css/templatesStyles"]:not(:last-of-type)');setTimeout(()=>{t.forEach(function(e){document.head.removeChild(e)})},1)}function openMenu(e){let n;(n=e?document.querySelectorAll("ul#menu-main-menu li.menu-item-has-children.visible > div:not(:hover)"):document.querySelectorAll("ul#menu-main-menu li.menu-item-has-children.visible>ul:not(:hover)")).forEach(function(e){e.style.opacity="1"})}function generateBreadcrumbs(){let e=document.getElementById("breadcrumb"),n=window.location.pathname.split("/").filter(function(e){return 0!=e.length}),t="";n.forEach((i,a)=>{t+="/"+i;let s=a===n.length-1,l=document.createElement("li");if(s)l.textContent=i;else{let r=document.createElement("a");r.href=t,r.textContent=i,l.appendChild(r)}e.appendChild(l)})}radioButtons.forEach(function(e){e.addEventListener("click",function(){selectStylesheet(this.id);var e=new XMLHttpRequest;e.open("GET","assets/php_scripts/update_style_preference.php?stylePreference="+this.id,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var n="stylePreference="+encodeURIComponent(this.id);e.send(n)})}),window.onload=generateBreadcrumbs;